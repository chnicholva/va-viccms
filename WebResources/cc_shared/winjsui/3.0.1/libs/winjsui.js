/*! Copyright (c) Microsoft Open Technologies, Inc.  All Rights Reserved. Licensed under the Apache License, Version 2.0. See https://github.com/winjs/winjs/blob/master/License.txt for license information. */
!function(a){!function(b){"function"==typeof define&&define.amd?define(["./base"],b):(a.msWriteProfilerMark&&msWriteProfilerMark("WinJS.3.0 3.0.1.winjs.2015.9.16 ui.js,StartTM"),b(a.WinJS),a.msWriteProfilerMark&&msWriteProfilerMark("WinJS.3.0 3.0.1.winjs.2015.9.16 ui.js,StopTM"))}(function(b){var c=b.Utilities._require,d=b.Utilities._define;d("WinJS/Animations/_Constants",["exports","../Core/_Base"],function(a,b){"use strict";b.Namespace._moduleDefine(a,"WinJS.UI",{PageNavigationAnimation:{turnstile:"turnstile",slide:"slide",enterPage:"enterPage",continuum:"continuum"}})}),d("WinJS/Animations/_TransitionAnimation",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise","../Scheduler","../Utilities/_ElementUtilities"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){return Array.isArray(a)||a instanceof b.NodeList||a instanceof b.HTMLCollection?a:a?[a]:[]}function j(){return++B,"WinJSUIAnimation"+B}function k(a){return"WinJSUIAnimation"===a.substring(0,16)}function l(a){b.getComputedStyle(a,null).opacity}function m(b,c){return function(d){var e={};for(var f in d){var g=d[f];"function"==typeof g&&(g=g(b,c)),e[f]=g}return e.exactTiming||(e.delay+=a._libraryDelay),e}}function n(a,b){var c=a+"|"+b,d=C[c];d&&d(D)}function o(a,b,c){C[a+"|"+b]=c}function p(a,b){delete C[a+"|"+b]}function q(a,b,c,d,e){var f=e.styleCaches[b]||new F(b,e,c);f.cref+=d.length,d.forEach(function(a){n(b,a.property)}),(e.isTransition||d.some(function(a){return f.removed[a[e.nameField]]}))&&(l(a),f.removed={});var g=d.map(function(a){return a[e.nameField]+" "+e.props.map(function(b){return(b[1]?a[b[1]]:"")+b[2]}).join(" ")}).join(", "),h=d.map(function(a){return a[e.nameField]}).join(", ");return""!==f.names&&(g=f.names+", "+g,h=f.names+", "+h),c[e.shorthandProp]=g,f.names=h,f}function r(a,b){b?a():g.schedule(function(){a()},g.Priority.normal,null,"WinJS.UI._Animation._completeAnimationPromise")}function s(a,c,d,g,i){if(d.length>0){var j=a.style,k=h._uniqueID(a);if(y||(y=b.document.createElement("DIV").style),d=d.map(m(c,a)),d.forEach(function(a){var b=e._getCamelCasedName(a.property);a.hasOwnProperty("from")&&(j[b]=a.from),y[b]=a.to,a.to=y[b],a.propertyScriptName=b}),i){var l=q(a,k,j,d,G),n=a.disabled?b.document:a;d.forEach(function(c){var d;g.push(new f(function(f){d=function(d){g&&(n.removeEventListener(e._browserEventEquivalents.transitionEnd,g,!1),p(k,c.property),l.removeName(j,c.propertyScriptName,d?a:null,c.skipStylesReset),b.clearTimeout(i),g=null),r(f,d===E)};var g=function(b){b.target===a&&b.propertyName===c.property&&d()};o(k,c.property,d),n.addEventListener(e._browserEventEquivalents.transitionEnd,g,!1);var h=0;j[c.propertyScriptName]!==c.to&&(j[c.propertyScriptName]=c.to,h=50);var i=b.setTimeout(function(){i=b.setTimeout(d,c.delay+c.duration)},h)},function(){d(E)}))})}else d.forEach(function(a){j[a.propertyScriptName]=a.to})}}function t(a,c,d,g,i){if(i&&d.length>0){var k=a.style,l=h._uniqueID(a);d=d.map(m(c,a));var n,s=a.disabled?b.document:a;d.forEach(function(a){if(a.keyframe)a.keyframe=A.animationPrefix+a.keyframe;else{n||(n=b.document.createElement("STYLE"),b.document.documentElement.appendChild(n)),a.keyframe=j();var c="@"+A.keyframes+" "+a.keyframe+" { from {"+a.property+":"+a.from+";} to {"+a.property+":"+a.to+";}}";n.sheet.insertRule(c,0)}});var t=q(a,l,k,d,H),u=[],v=[];d.forEach(function(c){var d;v.push(new f(function(f){d=function(a){g&&(s.removeEventListener(e._browserEventEquivalents.animationEnd,g,!1),b.clearTimeout(h),g=null),r(f,a===E)};var g=function(b){b.target===a&&b.animationName===c.keyframe&&d()};o(l,c.property,d),u.push({id:l,property:c.property,style:k,keyframe:c.keyframe});var h=b.setTimeout(function(){h=b.setTimeout(d,c.delay+c.duration)},50);s.addEventListener(e._browserEventEquivalents.animationEnd,g,!1)},function(){d(E)}))}),n&&b.setTimeout(function(){var a=n.parentElement;a&&a.removeChild(n)},50);var w=function(){for(var a=0;a<u.length;a++){var b=u[a];p(b.id,b.property),t.removeName(b.style,b.keyframe)}};g.push(f.join(v).then(w,w))}}function u(){z||(z=c.Windows.UI.ViewManagement.UISettings?new c.Windows.UI.ViewManagement.UISettings:{animationsEnabled:!0})}function v(b,c,d){try{for(var e=a.isAnimationEnabled(),h=i(b),j=i(c),k=[],l=0;l<h.length;l++)if(Array.isArray(h[l]))for(var m=0;m<h[l].length;m++)d(h[l][m],l,j,k,e);else d(h[l],l,j,k,e);return k.length?f.join(k):g.schedulePromiseNormal(null,"WinJS.UI._Animation._completeActionPromise").then(null,function(){})}catch(n){return f.wrapError(n)}}function w(a){return Array.isArray(a)?a.map(function(a){return w(a)}):a?(a.delay=K(a.delay),a.duration=K(a.duration),a):void 0}function x(a){return L?w(a):a}if(b.document){var y,z,A=e._browserStyleEquivalents,B=0,C=[],D=1,E=2,F=d.Class.define(function(a,b,c){this.cref=0,this.id=a,this.desc=b,this.removed={},this.prevStyles=b.props.map(function(a){return c[a[0]]}),this.prevNames=this.names=c[b.nameProp],b.styleCaches[a]=this},{destroy:function(a,b){var c=this.desc;delete c.styleCaches[this.id],b||(""===this.prevNames&&this.prevStyles.every(function(a){return""===a})?a[c.shorthandProp]="":(c.props.forEach(function(b,c){a[b[0]]=this.prevStyles[c]},this),a[c.nameProp]=this.prevNames))},removeName:function(a,b,c,d){var e=this.names,f=e.split(", "),g=f.lastIndexOf(b);g>=0&&(f.splice(g,1),this.names=e=f.join(", "),""===e&&this.desc.isTransition&&(e="none")),--this.cref?(a[this.desc.nameProp]=e,k(b)||(this.removed[b]=!0)):(c&&"none"===e&&(a[this.desc.nameProp]=e,l(c)),this.destroy(a,d))}}),G={shorthandProp:A.transition.scriptName,nameProp:A["transition-property"].scriptName,nameField:"property",props:[[A["transition-duration"].scriptName,"duration","ms"],[A["transition-timing-function"].scriptName,"timing",""],[A["transition-delay"].scriptName,"delay","ms"]],isTransition:!0,styleCaches:[]},H={shorthandProp:A.animation.scriptName,nameProp:A["animation-name"].scriptName,nameField:"keyframe",props:[[A["animation-duration"].scriptName,"duration","ms"],[A["animation-timing-function"].scriptName,"timing",""],[A["animation-delay"].scriptName,"delay","ms"],[A["animation-iteration-count"].scriptName,"","1"],[A["animation-direction"].scriptName,"","normal"],[A["animation-fill-mode"].scriptName,"","both"]],isTransition:!1,styleCaches:[]},I=0,J=function(){return u(),I+z.animationsEnabled>0},K=function(a){return L?a/20:a},L=!1,M=0;d.Namespace._moduleDefine(a,"WinJS.UI",{disableAnimations:function(){I--},enableAnimations:function(){I++},isAnimationEnabled:{get:function(){return J},set:function(a){J=a}},_libraryDelay:{get:function(){return M},set:function(a){M=a}},executeAnimation:function(a,b){return v(a,x(b),t)},executeTransition:function(a,b){return v(a,x(b),s)},_animationTimeAdjustment:{get:function(){return K},set:function(a){K=a}}}),d.Namespace._moduleDefine(a,"WinJS.Utilities",{_fastAnimations:{get:function(){return L},set:function(a){L=a}}})}}),d("WinJS/Animations",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./Animations/_Constants","./Animations/_TransitionAnimation","./Promise"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c){return a.keyframe?a.keyframe:!c||a.left!==b.left||a.top!==b.top||a.rtlflip&&!b.rtlflip?null:a.rtlflip?k(c):c}function j(a,b){return b&&a.rtlflip?k(b):b}function k(a){var c=a+"-rtl";return function(d,e){return"ltr"===b.getComputedStyle(e).direction?a:c}}function l(a){return Array.isArray(a)||a instanceof b.NodeList||a instanceof b.HTMLCollection?a:a?[a]:[]}function m(a){for(var c=[],d=0;d<a.length;d++){var e={top:a[d].offsetTop,left:a[d].offsetLeft},f=b.getComputedStyle(a[d],null)[z.scriptName].split(",");6===f.length&&(e.left+=parseFloat(f[4]),e.top+=parseFloat(f[5])),c.push(e)}return c}function n(a,b,c,d){return function(e){for(var f=a,g=0;e>g;g++)b*=c,f+=b;return d&&(f=Math.min(f,d)),f}}function o(a,b){for(var c=0;c<b.length;c++)b[c].top-=a[c].offsetTop,b[c].left-=a[c].offsetLeft}function p(a,b,c){o(a,b);for(var d=0;d<a.length;d++)(0!==b[d].top||0!==b[d].left)&&(a[d].style[z.scriptName]="translate("+b[d].left+"px, "+b[d].top+"px)");return g.executeTransition(a,c)}function q(a,b,c,d,e,f,h,i){function j(a,b,c){if(a){var d={left:b+"px",top:"0px"},e={left:c+"px",top:"0px"};if(+a.length===a.length)for(var f=0,g=a.length;g>f;f++)k.push(a[f]),l.push(d),m.push(e);else k.push(a),l.push(d),m.push(e)}}var k=[],l=[],m=[],n=200,o=0!==b?0>b?-n:n:0,p=0!==c?0>c?-n:n:0;return j(e,b,c),j(f,o,p),j(h,2*o,2*p),j(i,3*o,3*p),l=new B(l),m=new B(m),g.executeTransition(k,[{property:z.cssName,delay:0,duration:350,timing:a,from:t(l),to:t(m)},{property:"opacity",delay:0,duration:350,timing:d?"steps(1, start)":"steps(1, end)",from:d?0:1,to:d?1:0}])}function r(a,c,e){function f(){s(a)}a=l(a),c=l(c);for(var h=0,i=a.length;i>h;h++){var j="rtl"===b.getComputedStyle(a[h]).direction;a[h].style[d._browserStyleEquivalents["transform-origin"].scriptName]=c[Math.min(c.length-1,h)][j?"rtl":"ltr"]}return g.executeTransition(a,e).then(f,f)}function s(a){for(var b=0,c=a.length;c>b;b++)a[b].style[d._browserStyleEquivalents["transform-origin"].scriptName]="",a[b].style[z.scriptName]="",a[b].style.opacity=""}function t(a,c){return c=c||"",function(d,e){var f=a.getOffset(d),g=f.left;return f.rtlflip&&"rtl"===b.getComputedStyle(e).direction&&(g=g.toString(),g="-"===g.charAt(0)?g.substring(1):"-"+g),c+"translate("+g+", "+f.top+")"}}function u(a,b){return b=b||"",function(c){var d=a[c];return"translate("+d.left+"px, "+d.top+"px) "+b}}function v(a,b){return function(c){var d=a[c];return 0===d.left&&0===d.top?b:null}}function w(a,b,c,d){var e=l(b),f=l(c),g=m(f);return new a(e,f,g,d)}function x(a){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d].getBoundingClientRect(),g=-(40+f.left),h=40+(b.innerWidth-f.right),i=b.innerHeight/2-f.top;c.push({ltr:g+"px "+i+"px",rtl:h+"px "+i+"px"})}return c}function y(a){e("WinJS.UI.Animation:"+a)}var z=d._browserStyleEquivalents.transform,A=[{top:"0px",left:"11px",rtlflip:!0}],B=c.Class.define(function(a,b,c){c=c||A,Array.isArray(a)&&a.length>0?(this.offsetArray=a,1===a.length&&(this.keyframe=i(a[0],c[0],b))):a&&a.hasOwnProperty("top")&&a.hasOwnProperty("left")?(this.offsetArray=[a],this.keyframe=i(a,c[0],b)):(this.offsetArray=c,this.keyframe=j(c[0],b))},{getOffset:function(a){return a>=this.offsetArray.length&&(a=this.offsetArray.length-1),this.offsetArray[a]}},{supportedForProcessing:!1}),C=c.Class.define(function(a,b,c){this.revealedArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){y("expandAnimation,StartTM");var a=g.executeAnimation(this.revealedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?200:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}),b=p(this.affectedArray,this.offsetArray,{property:z.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([a,b]).then(function(){y("expandAnimation,StopTM")})}},{supportedForProcessing:!1}),D=c.Class.define(function(a,b,c){this.hiddenArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){y("collapseAnimation,StartTM");var a=g.executeAnimation(this.hiddenArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0}),b=p(this.affectedArray,this.offsetArray,{property:z.cssName,delay:this.hiddenArray.length>0?167:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([a,b]).then(function(){y("collapseAnimation,StopTM")})}},{supportedForProcessing:!1}),E=c.Class.define(function(a,b,c){this.elementArray=b,this.offsetArray=c},{execute:function(){return y("repositionAnimation,StartTM"),p(this.elementArray,this.offsetArray,{property:z.cssName,delay:n(0,33,1,250),duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){y("repositionAnimation,StopTM")})}},{supportedForProcessing:!1}),F=c.Class.define(function(a,b,c){this.addedArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){y("addToListAnimation,StartTM");var a=this.affectedArray.length>0?240:0,b=g.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:z.cssName,delay:a,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:a,duration:120,timing:"linear",from:0,to:1}]),c=p(this.affectedArray,this.offsetArray,{property:z.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([b,c]).then(function(){y("addToListAnimation,StopTM")})}},{supportedForProcessing:!1}),G=c.Class.define(function(a,b,c){this.deletedArray=a,this.remainingArray=b,this.offsetArray=c},{execute:function(){y("deleteFromListAnimation,StartTM");var a=g.executeAnimation(this.deletedArray,[{keyframe:"WinJS-scale-down",property:z.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:"none",to:"scale(0.85)"},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]),b=p(this.remainingArray,this.offsetArray,{property:z.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([a,b]).then(function(){y("deleteFromListAnimation,StopTM")})}},{supportedForProcessing:!1}),H=c.Class.define(function(a,b,c,d){this.addedArray=a,this.affectedArray=b,this.offsetArray=c;var e=l(d);this.deletedArray=e,this.deletedOffsetArray=m(e)},{execute:function(){y("_updateListAnimation,StartTM"),o(this.deletedArray,this.deletedOffsetArray);var a=0,b=g.executeAnimation(this.deletedArray,[{keyframe:v(this.deletedOffsetArray,"WinJS-scale-down"),property:z.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:u(this.deletedOffsetArray),to:u(this.deletedOffsetArray,"scale(0.85)")},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]);this.deletedArray.length>0&&(a+=60);var c=p(this.affectedArray,this.offsetArray,{property:z.cssName,delay:a,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});this.affectedArray.length>0?a+=240:a&&(a+=60);var d=g.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:z.cssName,delay:a,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:a,duration:120,timing:"linear",from:0,to:1}]);return h.join([b,c,d]).then(function(){y("_updateListAnimation,StopTM")})}},{supportedForProcessing:!1}),I=c.Class.define(function(a,b,c){this.addedArray=a,this.affectedArray=b,this.offsetArray=c},{execute:function(){y("addToSearchListAnimation,StartTM");var a=g.executeAnimation(this.addedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?240:0,duration:117,timing:"linear",from:0,to:1}),b=p(this.affectedArray,this.offsetArray,{property:z.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([a,b]).then(function(){y("addToSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),J=c.Class.define(function(a,b,c){this.deletedArray=a,this.remainingArray=b,this.offsetArray=c},{execute:function(){y("deleteFromSearchListAnimation,StartTM");var a=g.executeAnimation(this.deletedArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:93,timing:"linear",from:1,to:0}),b=p(this.remainingArray,this.offsetArray,{property:z.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([a,b]).then(function(){y("deleteFromSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),K=c.Class.define(function(a,b,c){this.elementArray=b,this.offsetArray=c},{execute:function(){return y("peekAnimation,StartTM"),p(this.elementArray,this.offsetArray,{property:z.cssName,delay:0,duration:2e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){y("peekAnimation,StopTM")})}},{supportedForProcessing:!1});c.Namespace._moduleDefine(a,"WinJS.UI.Animation",{createExpandAnimation:function(a,b){return w(C,a,b)},createCollapseAnimation:function(a,b){return w(D,a,b)},createRepositionAnimation:function(a){return w(E,null,a)},fadeIn:function(a){return y("fadeIn,StartTM"),g.executeTransition(a,{property:"opacity",delay:0,duration:250,timing:"linear",from:0,to:1}).then(function(){y("fadeIn,StopTM")})},fadeOut:function(a){return y("fadeOut,StartTM"),g.executeTransition(a,{property:"opacity",delay:0,duration:167,timing:"linear",to:0}).then(function(){y("fadeOut,StopTM")})},createAddToListAnimation:function(a,b){return w(F,a,b)},createDeleteFromListAnimation:function(a,b){return w(G,a,b)},_createUpdateListAnimation:function(a,b,c){return w(H,a,c,b)},createAddToSearchListAnimation:function(a,b){return w(I,a,b)},createDeleteFromSearchListAnimation:function(a,b){return w(J,a,b)},showEdgeUI:function(a,b,c){y("showEdgeUI,StartTM");var d=new B(b,"WinJS-showEdgeUI",[{top:"-70px",left:"0px"}]);return g[c&&"transition"===c.mechanism?"executeTransition":"executeAnimation"](a,{keyframe:d.keyframe,property:z.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:d.keyframe||t(d),to:"none"}).then(function(){y("showEdgeUI,StopTM")})},showPanel:function(a,b){y("showPanel,StartTM");var c=new B(b,"WinJS-showPanel",[{top:"0px",left:"364px",rtlflip:!0}]);return g.executeAnimation(a,{keyframe:c.keyframe,property:z.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||t(c),to:"none"}).then(function(){y("showPanel,StopTM")})},hideEdgeUI:function(a,b,c){y("hideEdgeUI,StartTM");var d=new B(b,"WinJS-hideEdgeUI",[{top:"-70px",left:"0px"}]);return g[c&&"transition"===c.mechanism?"executeTransition":"executeAnimation"](a,{keyframe:d.keyframe,property:z.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:d.keyframe||t(d)}).then(function(){y("hideEdgeUI,StopTM")})},hidePanel:function(a,b){y("hidePanel,StartTM");var c=new B(b,"WinJS-hidePanel",[{top:"0px",left:"364px",rtlflip:!0}]);return g.executeAnimation(a,{keyframe:c.keyframe,property:z.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:c.keyframe||t(c)}).then(function(){y("hidePanel,StopTM")})},showPopup:function(a,b){y("showPopup,StartTM");var c=new B(b,"WinJS-showPopup",[{top:"50px",left:"0px"}]);return g.executeAnimation(a,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:83,duration:83,timing:"linear",from:0,to:1},{keyframe:c.keyframe,property:z.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||t(c),to:"none"}]).then(function(){y("showPopup,StopTM")})},hidePopup:function(a){return y("hidePopup,StartTM"),g.executeAnimation(a,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:83,timing:"linear",from:1,to:0}).then(function(){y("hidePopup,StopTM")})},pointerDown:function(a){return y("pointerDown,StartTM"),g.executeTransition(a,{property:z.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.975, 0.975)"}).then(function(){y("pointerDown,StopTM")})},pointerUp:function(a){return y("pointerUp,StartTM"),g.executeTransition(a,{property:z.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){y("pointerUp,StopTM")})},dragSourceStart:function(a,b){y("dragSourceStart,StartTM");var c=g.executeTransition(a,[{property:z.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(1.05)"},{property:"opacity",delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:.65}]),d=g.executeTransition(b,{property:z.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"});return h.join([c,d]).then(function(){y("dragSourceStart,StopTM")})},dragSourceEnd:function(a,b,c){y("dragSourceEnd,StartTM");var d=new B(b,"WinJS-dragSourceEnd"),e=g.executeTransition(a,[{property:z.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:1}]),f=g.executeAnimation(a,{keyframe:d.keyframe,property:z.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:d.keyframe||t(d,"scale(1.05) "),to:"none"}),i=g.executeTransition(c,{property:z.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return h.join([e,f,i]).then(function(){y("dragSourceEnd,StopTM")})},enterContent:function(a,b,c){y("enterContent,StartTM");var d,e=new B(b,"WinJS-enterContent",[{top:"0px",left:"40px",rtlflip:!0}]);if(c&&"transition"===c.mechanism)d=g.executeTransition(a,[{property:z.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:t(e),to:"none"},{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}]);else{var f=g.executeAnimation(a,{keyframe:e.keyframe,property:z.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:e.keyframe||t(e),to:"none"}),i=g.executeTransition(a,{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});d=h.join([f,i])}return d.then(function(){y("enterContent,StopTM")})},exitContent:function(a,b){y("exitContent,StartTM");var c=new B(b,"WinJS-exit",[{top:"0px",left:"0px"}]),d=g.executeAnimation(a,b&&{keyframe:c.keyframe,property:z.cssName,delay:0,duration:117,timing:"linear",from:"none",to:c.keyframe||t(c)}),e=g.executeTransition(a,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return h.join([d,e]).then(function(){y("exitContent,StopTM")})},dragBetweenEnter:function(a,b){y("dragBetweenEnter,StartTM");var c=new B(b,null,[{top:"-40px",left:"0px"},{top:"40px",left:"0px"}]);return g.executeTransition(a,{property:z.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:t(c,"scale(0.95) ")}).then(function(){y("dragBetweenEnter,StopTM")})},dragBetweenLeave:function(a){return y("dragBetweenLeave,StartTM"),g.executeTransition(a,{property:z.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"}).then(function(){y("dragBetweenLeave,StopTM")})},swipeSelect:function(a,b){y("swipeSelect,StartTM");var c=g.executeTransition(a,{property:z.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),d=g.executeAnimation(b,{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return h.join([c,d]).then(function(){y("swipeSelect,StopTM")})},swipeDeselect:function(a,b){y("swipeDeselect,StartTM");var c=g.executeTransition(a,{property:z.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),d=g.executeAnimation(b,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0});return h.join([c,d]).then(function(){y("swipeDeselect,StopTM")})},swipeReveal:function(a,b){y("swipeReveal,StartTM");var c=new B(b,null,[{top:"25px",left:"0px"}]);return g.executeTransition(a,{property:z.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:t(c)}).then(function(){y("swipeReveal,StopTM")})},enterPage:function(a,b){y("enterPage,StartTM");var c=new B(b,"WinJS-enterPage",[{top:"0px",left:"100px",rtlflip:!0}]),d=g.executeAnimation(a,{keyframe:c.keyframe,property:z.cssName,delay:n(0,83,1,333),duration:1e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||t(c),to:"none"}),e=g.executeTransition(a,{property:"opacity",delay:n(0,83,1,333),duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return h.join([d,e]).then(function(){y("enterPage,StopTM")})},exitPage:function(a,b){y("exitPage,StartTM");var c=new B(b,"WinJS-exit",[{top:"0px",left:"0px"}]),d=g.executeAnimation(a,b&&{keyframe:c.keyframe,property:z.cssName,delay:0,duration:117,timing:"linear",from:"none",to:c.keyframe||t(c)}),e=g.executeTransition(a,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return h.join([d,e]).then(function(){y("exitPage,StopTM")})},crossFade:function(a,b){y("crossFade,StartTM");var c=g.executeTransition(a,{property:"opacity",delay:0,duration:167,timing:"linear",to:1}),d=g.executeTransition(b,{property:"opacity",delay:0,duration:167,timing:"linear",to:0});return h.join([c,d]).then(function(){y("crossFade,StopTM")})},createPeekAnimation:function(a){return w(K,null,a)},updateBadge:function(a,b){y("updateBadge,StartTM");var c=new B(b,"WinJS-updateBadge",[{top:"24px",left:"0px"}]);return g.executeAnimation(a,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1},{keyframe:c.keyframe,property:z.cssName,delay:0,duration:1333,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:c.keyframe||t(c),to:"none"}]).then(function(){y("updateBadge,StopTM")})},turnstileForwardIn:function(a){y("turnstileForwardIn,StartTM"),a=l(a);var b=x(a);return r(a,b,[{property:z.cssName,delay:n(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(80deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:n(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){y("turnstileForwardIn,StopTM")})},turnstileForwardOut:function(a){y("turnstileForwardOut,StartTM"),a=l(a);var b=x(a);return r(a,b,[{property:z.cssName,delay:n(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(600px) rotateY(0deg)",to:"perspective(600px) rotateY(-50deg)"},{property:"opacity",delay:n(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){y("turnstileForwardOut,StopTM")})},turnstileBackwardIn:function(a){y("turnstileBackwardIn,StartTM"),a=l(a);var b=x(a);return r(a,b,[{property:z.cssName,delay:n(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(-50deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:n(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){y("turnstileBackwardIn,StopTM")})},turnstileBackwardOut:function(a){y("turnstileBackwardOut,StartTM"),a=l(a);var b=x(a);return r(a,b,[{property:z.cssName,delay:n(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(800px) rotateY(0deg)",to:"perspective(800px) rotateY(80deg)"},{property:"opacity",delay:n(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){y("turnstileBackwardOut,StopTM")})},slideDown:function(a){return y("slideDown,StartTM"),r(a,{ltr:"",rtl:""},[{property:z.cssName,delay:0,duration:250,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"translate(0px, 0px)",to:"translate(0px, 200px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){y("slideDown,StopTM")})},slideUp:function(a){return y("slideUp,StartTM"),r(a,{ltr:"",rtl:""},[{property:z.cssName,delay:0,duration:350,timing:"cubic-bezier(0.17,0.79,0.215,1.0025)",from:"translate(0px, 200px)",to:"translate(0px, 0px)"},{property:"opacity",delay:n(0,34,1,1e3),duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){y("slideUp,StopTM")})},slideRightIn:function(a,c,d,e){return y("slideRightIn,StartTM"),q("cubic-bezier(0.17,0.79,0.215,1.0025)",-b.innerWidth,0,!0,a,c,d,e).then(function(){y("slideRightIn,StopTM")})},slideRightOut:function(a,c,d,e){return y("slideRightOut,StartTM"),q("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,b.innerWidth,!1,a,c,d,e).then(function(){y("slideRightOut,StopTM")})},slideLeftIn:function(a,c,d,e){return y("slideLeftIn,StartTM"),q("cubic-bezier(0.17,0.79,0.215,1.0025)",b.innerWidth,0,!0,a,c,d,e).then(function(){y("slideLeftIn,StopTM")})},slideLeftOut:function(a,c,d,e){return y("slideLeftOut,StartTM"),q("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,-b.innerWidth,!1,a,c,d,e).then(function(){y("slideLeftOut,StopTM")})},continuumForwardIn:function(a,b,c){return y("continuumForwardIn,StartTM"),h.join([g.executeTransition(a,[{property:z.cssName,delay:0,duration:350,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(0.5, 0.5)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),g.executeTransition(b,[{property:z.cssName,delay:0,duration:350,timing:"cubic-bezier(0.24,1.15,0.11,1.1575)",from:"translate(0px, 225px)",to:"translate(0px, 0px)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),r(c,{ltr:"0px 50%",rtl:"100% 50%"},[{property:z.cssName,delay:0,duration:350,timing:"cubic-bezier(0,0.62,0.8225,0.9625)",from:"rotateX(80deg) scale(1.5, 1.5)",to:"rotateX(0deg) scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){y("continuumForwardIn,StopTM")})},continuumForwardOut:function(a,b){return y("continuumForwardOut,StartTM"),h.join([g.executeTransition(a,[{property:z.cssName,delay:0,duration:120,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(1.1, 1.1)"},{property:"opacity",delay:0,duration:120,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]),r(b,{ltr:"0px 100%",rtl:"100% 100%"},[{property:z.cssName,delay:0,duration:152,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"rotateX(0deg) scale(1.0, 1.0) translate(0px, 0px)",to:"rotateX(80deg) scale(1.5, 1.5) translate(0px, 150px)"},{property:"opacity",delay:0,duration:152,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}])]).then(function(){y("continuumForwardOut,StopTM")})},continuumBackwardIn:function(a,b){return y("continuumBackwardIn,StartTM"),h.join([g.executeTransition(a,[{property:z.cssName,delay:0,duration:200,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(1.25, 1.25)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:200,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),r(b,{ltr:"0px 50%",rtl:"100% 50%"},[{property:z.cssName,delay:0,duration:250,timing:"cubic-bezier(0.2975, 0.7325, 0.4725, 0.99)",from:"rotateX(80deg) translate(0px, -100px)",to:"rotateX(0deg) translate(0px, 0px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){y("continuumBackwardIn,StopTM")})},continuumBackwardOut:function(a){return y("continuumBackwardOut,StartTM"),g.executeTransition(a,[{property:z.cssName,delay:0,duration:167,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(0.5, 0.5)"},{property:"opacity",delay:0,duration:167,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){y("continuumBackwardOut,StopTM")})},createPageNavigationAnimations:function(b,c,e){function g(){return h.wrap()}var i=f.PageNavigationAnimation;return d.isPhone&&b!==i.enterPage&&c!==i.enterPage?(c||(c=i.turnstile),b===i.slide&&e||c===i.slide&&!e?{exit:e?a.slideDown:g,entrance:e?g:a.slideUp}:{exit:a[c+(e?"Backward":"Forward")+"Out"],entrance:a[c+(e?"Backward":"Forward")+"In"]}):{exit:g,entrance:a.enterPage}}})}),d("require-style",{load:function(a){throw new Error("Dynamic load not allowed: "+a)}}),d("require-style!less/desktop/controls",[],function(){}),d("require-style!less/phone/controls",[],function(){}),d("WinJS/Controls/Tooltip",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Animations","../Animations/_TransitionAnimation","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","require-style!less/desktop/controls","require-style!less/phone/controls"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";d.Namespace._moduleDefine(a,"WinJS.UI",{Tooltip:d.Namespace._lazy(function(){function a(a,b){return"pointerdown"===a?b===G:a in H}function l(a,b){return"pointerdown"===a?b!==G:a in J}var m=0,n=k.Key,o="top",p=h._animationTimeAdjustment(400),q=h._animationTimeAdjustment(1200),r=h._animationTimeAdjustment(400),s=h._animationTimeAdjustment(5e3),t=h._animationTimeAdjustment(0),u=h._animationTimeAdjustment(600),v=h._animationTimeAdjustment(400),w=h._animationTimeAdjustment(600),x=h._animationTimeAdjustment(200),y=h._animationTimeAdjustment(3e5),z=12,A=20,B=45,C=20,D=12,E=1,F=k._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",G=k._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",H={
keyup:"",pointerover:"",pointerdown:""},I={pointermove:""},J={pointerdown:"",keydown:"",focusout:"",pointerout:"",pointercancel:"",pointerup:""},K={pointerover:"",pointerout:""},L="win-tooltip",M="win-tooltip-phantom",N=r,O=2*N,P=2.5*N,Q=s,R=!1,S=!1,T=f._createEventProperty;return d.Class.define(function(a,d){a=a||b.document.createElement("div");var e=k.data(a).tooltip;if(e)return e;if(!S&&c.Windows.UI.ViewManagement.UISettings){var f=new c.Windows.UI.ViewManagement.UISettings;N=h._animationTimeAdjustment(f.mouseHoverTime),O=2*N,P=2.5*N,Q=h._animationTimeAdjustment(1e3*f.messageDuration);var g=f.handPreference;R=g===c.Windows.UI.ViewManagement.HandPreference.leftHanded}S=!0,this._disposed=!1,this._placement=o,this._infotip=!1,this._innerHTML=null,this._contentElement=null,this._extraClass=null,this._lastContentType="html",this._anchorElement=a,this._domElement=null,this._phantomDiv=null,this._triggerByOpen=!1,this._eventListenerRemoveStack=[],this._lastKeyOrBlurEvent=null,this._currentKeyOrBlurEvent=null,a.winControl=this,k.addClass(a,"win-disposable"),a.title&&(this._innerHTML=this._anchorElement.title,this._anchorElement.removeAttribute("title")),i.setOptions(this,d),this._events(),k.data(a).tooltip=this},{innerHTML:{get:function(){return this._innerHTML},set:function(a){if(this._innerHTML=a,this._domElement){if(!this._innerHTML||""===this._innerHTML)return void this._onDismiss();this._domElement.innerHTML=a,this._position()}this._lastContentType="html"}},element:{get:function(){return this._anchorElement}},contentElement:{get:function(){return this._contentElement},set:function(a){if(this._contentElement=a,this._domElement){if(!this._contentElement)return void this._onDismiss();this._domElement.innerHTML="",this._domElement.appendChild(this._contentElement),this._position()}this._lastContentType="element"}},placement:{get:function(){return this._placement},set:function(a){"top"!==a&&"bottom"!==a&&"left"!==a&&"right"!==a&&(a=o),this._placement=a,this._domElement&&this._position()}},infotip:{get:function(){return this._infotip},set:function(a){this._infotip=!!a}},extraClass:{get:function(){return this._extraClass},set:function(a){this._extraClass=a}},onbeforeopen:T("beforeopen"),onopened:T("opened"),onbeforeclose:T("beforeclose"),onclosed:T("closed"),dispose:function(){if(!this._disposed){this._disposed=!0,j.disposeSubTree(this.element);for(var a=0,b=this._eventListenerRemoveStack.length;b>a;a++)this._eventListenerRemoveStack[a]();this._onDismiss();var c=k.data(this._anchorElement);c&&delete c.tooltip}},addEventListener:function(a,b,c){if(this._anchorElement){this._anchorElement.addEventListener(a,b,c);var d=this;this._eventListenerRemoveStack.push(function(){d._anchorElement.removeEventListener(a,b,c)})}},removeEventListener:function(a,b,c){this._anchorElement&&this._anchorElement.removeEventListener(a,b,c)},open:function(a){switch(this._triggerByOpen=!0,"touch"!==a&&"mouseover"!==a&&"mousedown"!==a&&"keyboard"!==a&&(a="default"),a){case"touch":this._onInvoke("touch","never");break;case"mouseover":this._onInvoke("mouse","auto");break;case"keyboard":this._onInvoke("keyboard","auto");break;case"mousedown":case"default":this._onInvoke("nodelay","never")}},close:function(){this._onDismiss()},_cleanUpDOM:function(){this._domElement&&(j.disposeSubTree(this._domElement),b.document.body.removeChild(this._domElement),this._domElement=null,b.document.body.removeChild(this._phantomDiv),this._phantomDiv=null)},_createTooltipDOM:function(){this._cleanUpDOM(),this._domElement=b.document.createElement("div");var a=k._uniqueID(this._domElement);this._domElement.setAttribute("id",a);var c=b.document.defaultView.getComputedStyle(this._anchorElement,null),d=this._domElement.style;d.direction=c.direction,d.writingMode=c["writing-mode"],this._domElement.setAttribute("tabindex",-1),this._domElement.setAttribute("role","tooltip"),this._anchorElement.setAttribute("aria-describedby",a),"element"===this._lastContentType?this._domElement.appendChild(this._contentElement):this._domElement.innerHTML=this._innerHTML,b.document.body.appendChild(this._domElement),k.addClass(this._domElement,L),this._extraClass&&k.addClass(this._domElement,this._extraClass),this._phantomDiv=b.document.createElement("div"),this._phantomDiv.setAttribute("tabindex",-1),b.document.body.appendChild(this._phantomDiv),k.addClass(this._phantomDiv,M);var e=b.document.defaultView.getComputedStyle(this._domElement,null).zIndex+1;this._phantomDiv.style.zIndex=e},_raiseEvent:function(a,c){if(this._anchorElement){var d=b.document.createEvent("CustomEvent");d.initCustomEvent(a,!1,!1,c),this._anchorElement.dispatchEvent(d)}},_captureLastKeyBlurOrPointerOverEvent:function(a){switch(this._lastKeyOrBlurEvent=this._currentKeyOrBlurEvent,a.type){case"keyup":a.keyCode===n.shift?this._currentKeyOrBlurEvent=null:this._currentKeyOrBlurEvent="keyboard";break;case"focusout":this._currentKeyOrBlurEvent=null}},_registerEventToListener:function(a,b){var c=this,d=function(a){c._captureLastKeyBlurOrPointerOverEvent(a),c._handleEvent(a)};k._addEventListener(a,b,d,!1),this._eventListenerRemoveStack.push(function(){k._removeEventListener(a,b,d,!1)})},_events:function(){for(var a in H)this._registerEventToListener(this._anchorElement,a);for(var a in I)this._registerEventToListener(this._anchorElement,a);for(a in J)this._registerEventToListener(this._anchorElement,a);this._registerEventToListener(this._anchorElement,"contextmenu"),this._registerEventToListener(this._anchorElement,"MSHoldVisual")},_handleEvent:function(b){var c=b._normalizedType||b.type;if(!this._triggerByOpen){if(c in K&&k.eventWithinElement(this._anchorElement,b))return;if(a(c,b.pointerType))if(b.pointerType===G)this._isShown||(this._showTrigger="touch"),this._onInvoke("touch","never",b);else{if(this._skipMouseOver&&b.pointerType===F&&"pointerover"===c)return void(this._skipMouseOver=!1);var d="key"===c.substring(0,3)?"keyboard":"mouse";this._isShown||(this._showTrigger=d),this._onInvoke(d,"auto",b)}else if(c in I)this._contactPoint={x:b.clientX,y:b.clientY};else if(l(c,b.pointerType)){var f;if(b.pointerType===G){if("pointerup"===c){this._skipMouseOver=!0;var g=this;e._yieldForEvents(function(){g._skipMouseOver=!1})}f="touch"}else f="key"===c.substring(0,3)?"keyboard":"mouse";if("focusout"!==c&&f!==this._showTrigger)return;this._onDismiss()}else("contextmenu"===c||"MSHoldVisual"===c)&&b.preventDefault()}},_onShowAnimationEnd:function(){if(!this._shouldDismiss&&!this._disposed&&(this._raiseEvent("opened"),this._domElement&&"never"!==this._hideDelay)){var a=this,b=this._infotip?Math.min(3*Q,y):Q;this._hideDelayTimer=this._setTimeout(function(){a._onDismiss()},b)}},_onHideAnimationEnd:function(){b.document.body.removeEventListener("DOMNodeRemoved",this._removeTooltip,!1),this._cleanUpDOM(),this._anchorElement&&this._anchorElement.removeAttribute("aria-describedby"),m=(new Date).getTime(),this._triggerByOpen=!1,this._disposed||this._raiseEvent("closed")},_decideOnDelay:function(a){var b;if(this._useAnimation=!0,"nodelay"===a)b=0,this._useAnimation=!1;else{var c=(new Date).getTime();x>=c-m?(b="touch"===a?this._infotip?v:t:this._infotip?w:u,this._useAnimation=!1):b="touch"===a?this._infotip?q:p:this._infotip?P:O}return b},_getAnchorPositionFromElementWindowCoord:function(){var a=this._anchorElement.getBoundingClientRect();return{x:a.left,y:a.top,width:a.width,height:a.height}},_getAnchorPositionFromPointerWindowCoord:function(a){return{x:a.x,y:a.y,width:1,height:1}},_canPositionOnSide:function(a,b,c,d){var e=0,f=0;switch(a){case"top":e=d.width+this._offset,f=c.y;break;case"bottom":e=d.width+this._offset,f=b.height-c.y-c.height;break;case"left":e=c.x,f=d.height+this._offset;break;case"right":e=b.width-c.x-c.width,f=d.height+this._offset}return e>=d.width+this._offset&&f>=d.height+this._offset},_positionOnSide:function(a,b,c,d){var e=0,f=0;switch(a){case"top":case"bottom":e=c.x+c.width/2-d.width/2,e=Math.min(Math.max(e,0),b.width-d.width-E),f="top"===a?c.y-d.height-this._offset:c.y+c.height+this._offset;break;case"left":case"right":f=c.y+c.height/2-d.height/2,f=Math.min(Math.max(f,0),b.height-d.height-E),e="left"===a?c.x-d.width-this._offset:c.x+c.width+this._offset}this._domElement.style.left=e+"px",this._domElement.style.top=f+"px",this._phantomDiv.style.left=e+"px",this._phantomDiv.style.top=f+"px",this._phantomDiv.style.width=d.width+"px",this._phantomDiv.style.height=d.height+"px"},_position:function(a){var c={width:0,height:0},d={x:0,y:0,width:0,height:0},e={width:0,height:0};c.width=b.document.documentElement.clientWidth,c.height=b.document.documentElement.clientHeight,"tb-rl"===b.document.defaultView.getComputedStyle(b.document.body,null)["writing-mode"]&&(c.width=b.document.documentElement.clientHeight,c.height=b.document.documentElement.clientWidth),d=!this._contactPoint||"touch"!==a&&"mouse"!==a?this._getAnchorPositionFromElementWindowCoord():this._getAnchorPositionFromPointerWindowCoord(this._contactPoint),e.width=this._domElement.offsetWidth,e.height=this._domElement.offsetHeight;var f={top:["top","bottom","left","right"],bottom:["bottom","top","left","right"],left:["left","right","top","bottom"],right:["right","left","top","bottom"]};R&&(f.top[2]="right",f.top[3]="left",f.bottom[2]="right",f.bottom[3]="left");for(var g=f[this._placement],h=g.length,i=0;h>i;i++)if(i===h-1||this._canPositionOnSide(g[i],c,d,e)){this._positionOnSide(g[i],c,d,e);break}return g[i]},_showTooltip:function(a){if(!this._shouldDismiss&&(this._isShown=!0,this._raiseEvent("beforeopen"),b.document.body.contains(this._anchorElement)&&!this._shouldDismiss)){if("element"===this._lastContentType){if(!this._contentElement)return void(this._isShown=!1)}else if(!this._innerHTML||""===this._innerHTML)return void(this._isShown=!1);var c=this;this._removeTooltip=function(a){for(var d=c._anchorElement;d;){if(a.target===d){b.document.body.removeEventListener("DOMNodeRemoved",c._removeTooltip,!1),c._cleanUpDOM();break}d=d.parentNode}},b.document.body.addEventListener("DOMNodeRemoved",this._removeTooltip,!1),this._createTooltipDOM(),this._position(a),this._useAnimation?g.fadeIn(this._domElement).then(this._onShowAnimationEnd.bind(this)):this._onShowAnimationEnd()}},_onInvoke:function(a,b,c){if(this._shouldDismiss=!1,!this._isShown&&(!c||"keyup"!==c.type||"keyboard"!==this._lastKeyOrBlurEvent&&(this._lastKeyOrBlurEvent||c.keyCode===n.tab))){this._hideDelay=b,this._contactPoint=null,c?(this._contactPoint={x:c.clientX,y:c.clientY},"touch"===a?this._offset=B:"keyboard"===a?this._offset=z:this._offset=A):"touch"===a?this._offset=C:this._offset=D,this._clearTimeout(this._delayTimer),this._clearTimeout(this._hideDelayTimer);var d=this._decideOnDelay(a);if(d>0){var e=this;this._delayTimer=this._setTimeout(function(){e._showTooltip(a)},d)}else this._showTooltip(a)}},_onDismiss:function(){this._shouldDismiss=!0,this._isShown&&(this._isShown=!1,this._showTrigger="mouse",this._domElement?(this._raiseEvent("beforeclose"),this._useAnimation?g.fadeOut(this._domElement).then(this._onHideAnimationEnd.bind(this)):this._onHideAnimationEnd()):(this._raiseEvent("beforeclose"),this._raiseEvent("closed")))},_setTimeout:function(a,c){return b.setTimeout(a,c)},_clearTimeout:function(a){b.clearTimeout(a)}},{_DELAY_INITIAL_TOUCH_SHORT:{get:function(){return p}},_DELAY_INITIAL_TOUCH_LONG:{get:function(){return q}},_DEFAULT_MOUSE_HOVER_TIME:{get:function(){return r}},_DEFAULT_MESSAGE_DURATION:{get:function(){return s}},_DELAY_RESHOW_NONINFOTIP_TOUCH:{get:function(){return t}},_DELAY_RESHOW_NONINFOTIP_NONTOUCH:{get:function(){return u}},_DELAY_RESHOW_INFOTIP_TOUCH:{get:function(){return v}},_DELAY_RESHOW_INFOTIP_NONTOUCH:{get:function(){return w}},_RESHOW_THRESHOLD:{get:function(){return x}},_HIDE_DELAY_MAX:{get:function(){return y}}})})})}),d("WinJS/Controls/Rating",["../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_SafeHtml","./Tooltip","require-style!less/desktop/controls","require-style!less/phone/controls"],function(a,b,c,d,e,f,g,h,i,j){"use strict";b.Namespace.define("WinJS.UI",{Rating:b.Namespace._lazy(function(){var h=d._createEventProperty,k={get averageRating(){return e._getWinJSString("ui/averageRating").value},get clearYourRating(){return e._getWinJSString("ui/clearYourRating").value},get tentativeRating(){return e._getWinJSString("ui/tentativeRating").value},get tooltipStringsIsInvalid(){return"Invalid argument: tooltipStrings must be null or an array of strings."},get unrated(){return e._getWinJSString("ui/unrated").value},get userRating(){return e._getWinJSString("ui/userRating").value}},l=5,m=!1,n="cancel",o="change",p="previewchange",q=0,r=g._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",s=g._MSPointerEvent.MSPOINTER_TYPE_PEN||"pen",t=g._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",u="padding-left: 0px; padding-right: 0px; border-left: 0px; border-right: 0px; -ms-flex: none; -webkit-flex: none; flex: none; display: none",v="win-rating",w="win-star win-empty",x="win-star win-average win-empty",y="win-star win-average win-full",z="win-star win-user win-empty",A="win-star win-user win-full",B="win-star win-tentative win-empty",C="win-star win-tentative win-full",D="win-disabled",E="win-average",F="win-user";return b.Class.define(function(b,c){this._disposed=!1,b=b||a.document.createElement("div"),c=c||{},this._element=b,g.addClass(this._element,"win-disposable"),this._userRating=0,this._averageRating=0,this._disabled=m,this._enableClear=!0,this._tooltipStrings=[],this._controlUpdateNeeded=!1,this._setControlSize(c.maxRating),c.tooltipStrings||this._updateTooltips(null),f.setOptions(this,c),this._controlUpdateNeeded=!0,this._forceLayout(),g._addInsertedNotifier(this._element),b.winControl=this,this._events()},{maxRating:{get:function(){return this._maxRating},set:function(a){this._setControlSize(a),this._forceLayout()}},userRating:{get:function(){return this._userRating},set:function(a){this._userRating=Math.max(0,Math.min(Number(a)>>0,this._maxRating)),this._updateControl()}},averageRating:{get:function(){return this._averageRating},set:function(a){this._averageRating=Number(a)<1?0:Math.min(Number(a)||0,this._maxRating),this._averageRatingElement&&this._ensureAverageMSStarRating(),this._updateControl()}},disabled:{get:function(){return this._disabled},set:function(a){this._disabled=!!a,this._disabled&&this._clearTooltips(),this._updateTabIndex(),this._updateControl()}},enableClear:{get:function(){return this._enableClear},set:function(a){this._enableClear=!!a,this._setAriaValueMin(),this._updateControl()}},tooltipStrings:{get:function(){return this._tooltipStrings},set:function(a){if("object"!=typeof a)throw new c("WinJS.UI.Rating.TooltipStringsIsInvalid",k.tooltipStringsIsInvalid);this._updateTooltips(a),this._updateAccessibilityRestState()}},element:{get:function(){return this._element}},oncancel:h(n),onchange:h(o),onpreviewchange:h(p),dispose:function(){if(!this._disposed){this._disposed=!0;for(var a=0;a<this._toolTips.length;a++)this._toolTips[a].dispose();this._toolTips=null}},addEventListener:function(a,b,c){this._element.addEventListener(a,b,c)},removeEventListener:function(a,b,c){return this._element.removeEventListener(a,b,c)},_forceLayout:function(){if(this._controlUpdateNeeded){var a=!1;this._updateControl=function(){a=!0},this.userRating=this._userRating,this.averageRating=this._averageRating,this._lastEventWasChange=!1,this._lastEventWasCancel=!1,this._tentativeRating=-1,this._captured=!1,this._pointerDownFocus=!1,this._elements=[],this._toolTips=[],this._clearElement=null,this._averageRatingElement=null,this._elementWidth=null,this._elementPadding=null,this._elementBorder=null,this._floatingValue=0,this._createControl(),this._setAccessibilityProperties(),delete this._updateControl,a&&this._updateControl()}},_hideAverageRating:function(){this._averageRatingHidden||(this._averageRatingHidden=!0,this._averageRatingElement.style.cssText=u)},_createControl:function(){g.addClass(this._element,v);var a="";this._averageRatingHidden=!0;for(var b=0;b<=this._maxRating;b++)a=b===this._maxRating?a+"<div class='"+y+"' style='"+u+"'></div>":a+"<div class='"+z+"'></div>";i.setInnerHTMLUnsafe(this._element,a);for(var c=this._element.firstElementChild,b=0;c;)this._elements[b]=c,b<this._maxRating&&(g.data(c).msStarRating=b+1),c=c.nextElementSibling,b++;this._averageRatingElement=this._elements[this._maxRating],this._ensureAverageMSStarRating(),this._updateTabIndex()},_setAriaValueMin:function(){this._element.setAttribute("aria-valuemin",this._enableClear?0:1)},_setAccessibilityProperties:function(){this._element.setAttribute("role","slider"),this._element.setAttribute("aria-valuemax",this._maxRating),this._setAriaValueMin(),this._updateAccessibilityRestState()},_getText:function(b){var c=this._tooltipStrings[b];if(c){var d=a.document.createElement("div");return d.innerHTML=c,d.textContent}return b===this._maxRating?k.clearYourRating:b+1},_updateAccessibilityRestState:function(){var a=this._element;this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.disconnect(),a.setAttribute("aria-readOnly",this._disabled),0!==this._userRating?(a.setAttribute("aria-valuenow",this._userRating),a.setAttribute("aria-label",k.userRating),a.setAttribute("aria-valuetext",this._getText(this._userRating-1))):0!==this._averageRating?(a.setAttribute("aria-valuenow",this._averageRating),a.setAttribute("aria-label",k.averageRating),a.setAttribute("aria-valuetext",this._averageRating)):(a.setAttribute("aria-valuenow",k.unrated),a.setAttribute("aria-label",k.userRating),a.setAttribute("aria-valuetext",k.unrated)),this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_updateAccessibilityHoverState:function(){var a=this._element;this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.disconnect(),a.setAttribute("aria-readOnly",this._disabled),this._tentativeRating>0?(a.setAttribute("aria-label",k.tentativeRating),a.setAttribute("aria-valuenow",this._tentativeRating),a.setAttribute("aria-valuetext",this._getText(this._tentativeRating-1))):0===this._tentativeRating?(a.setAttribute("aria-valuenow",k.unrated),a.setAttribute("aria-label",k.tentativeRating),a.setAttribute("aria-valuetext",this._getText(this._maxRating))):(a.setAttribute("aria-valuenow",k.unrated),a.setAttribute("aria-label",k.tentativeRating),a.setAttribute("aria-valuetext",k.unrated)),this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_ensureTooltips:function(){if(!this.disabled&&0===this._toolTips.length)for(var a=0;a<this._maxRating;a++)this._toolTips[a]=new j.Tooltip(this._elements[a])},_decrementRating:function(){this._closeTooltip();var a=!0;0===this._tentativeRating||-1===this._tentativeRating&&0===this._userRating?a=!1:(this._tentativeRating>0?this._tentativeRating--:-1===this._tentativeRating&&(0!==this._userRating&&this._userRating>0?this._tentativeRating=this._userRating-1:this._tentativeRating=0),0!==this._tentativeRating||this._enableClear||(this._tentativeRating=1,a=!1)),this._showTentativeRating(a,"keyboard")},_events:function(){function a(a){return{name:a,lowerCaseName:a.toLowerCase(),handler:function(b){var d=c["_on"+a];d&&d.apply(c,[b])}}}var b,c=this,d=[a("KeyDown"),a("FocusOut"),a("FocusIn"),a("PointerCancel"),a("PointerDown"),a("PointerMove"),a("PointerOver"),a("PointerUp"),a("PointerOut")],e=[a("WinJSNodeInserted")];for(b=0;b<d.length;++b)g._addEventListener(this._element,d[b].lowerCaseName,d[b].handler,!1);for(b=0;b<e.length;++b)this._element.addEventListener(e[b].name,e[b].handler,!1);this._ariaValueNowMutationObserver=new g._MutationObserver(this._ariaValueNowChanged.bind(this)),this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_onWinJSNodeInserted:function(){this._recalculateStarProperties(),this._updateControl()},_recalculateStarProperties:function(){var b=0;1===this._averageRating&&(b=1);var c=a.getComputedStyle(this._elements[b]);this._elementWidth=c.width,"rtl"===a.getComputedStyle(this._element).direction?(this._elementPadding=c.paddingRight,this._elementBorder=c.borderRight):(this._elementPadding=c.paddingLeft,this._elementBorder=c.borderLeft)},_hideAverageStar:function(){0!==this._averageRating&&this._resetAverageStar(!1)},_incrementRating:function(){this._closeTooltip();var a=!0;(this._tentativeRating===this._maxRating||-1===this._tentativeRating&&this._userRating===this._maxRating)&&(a=!1),-1!==this._tentativeRating?this._tentativeRating<this._maxRating&&this._tentativeRating++:0!==this._userRating?this._userRating<this._maxRating?this._tentativeRating=this._userRating+1:this._tentativeRating=this._maxRating:this._tentativeRating=1,this._showTentativeRating(a,"keyboard")},_ariaValueNowChanged:function(){if(!this._disabled){var a=this._element.getAttributeNode("aria-valuenow");if(null!==a){var b=Number(a.nodeValue);this.userRating!==b&&(this.userRating=b,this._tentativeRating=this._userRating,this._raiseEvent(o,this._userRating))}}},_onPointerCancel:function(){this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(n,null),this._captured=!1},_onPointerDown:function(a){(a.pointerType!==t||a.button===q)&&(this._captured||(this._pointerDownAt={x:a.clientX,y:a.clientY},this._pointerDownFocus=!0,this._disabled||(g._setPointerCapture(this._element,a.pointerId),this._captured=!0,a.pointerType===r?(this._tentativeRating=g.data(a.target).msStarRating||0,this._setStarClasses(C,this._tentativeRating,B),this._hideAverageStar(),this._updateAccessibilityHoverState(),this._openTooltip("touch"),this._raiseEvent(p,this._tentativeRating)):this._openTooltip("mousedown"))))},_onCapturedPointerMove:function(b,c){var d,e=this._pointerDownAt||{x:b.clientX,y:b.clientY},f=g._elementsFromPoint(b.clientX,e.y);if(f)for(var h=0,i=f.length;i>h;h++){var j=f[h];if("tooltip"===j.getAttribute("role"))return;if(g.hasClass(j,"win-star")){d=j;break}}var k;if(d&&d.parentElement===this._element)k=g.data(d).msStarRating||0;else{var l=0,m=this.maxRating;"rtl"===a.getComputedStyle(this._element).direction&&(l=m,m=0),k=b.clientX<e.x?l:m}var n=!1,o=Math.min(Math.ceil(k),this._maxRating);0!==o||this._enableClear||(o=1),o!==this._tentativeRating&&(this._closeTooltip(),n=!0),this._tentativeRating=o,this._showTentativeRating(n,c),b.preventDefault()},_onPointerMove:function(a){this._captured&&(a.pointerType===r?this._onCapturedPointerMove(a,"touch"):this._onCapturedPointerMove(a,"mousedown"))},_onPointerOver:function(a){this._disabled||a.pointerType!==s&&a.pointerType!==t||this._onCapturedPointerMove(a,"mouseover")},_onPointerUp:function(a){this._captured&&(g._releasePointerCapture(this._element,a.pointerId),this._captured=!1,this._onUserRatingChanged()),this._pointerDownAt=null},_onFocusOut:function(){this._captured||(this._onUserRatingChanged(),this._lastEventWasChange||this._lastEventWasCancel||this._raiseEvent(n,null))},_onFocusIn:function(){if(!this._pointerDownFocus){if(!this._disabled){if(0===this._userRating)for(var a=0;a<this._maxRating;a++)this._elements[a].className=B;this._hideAverageStar()}0!==this._userRating?this._raiseEvent(p,this._userRating):this._raiseEvent(p,0),this._tentativeRating=this._userRating}this._pointerDownFocus=!1},_onKeyDown:function(b){var c=g.Key,d=b.keyCode,e=a.getComputedStyle(this._element).direction,f=!0;switch(d){case c.enter:this._onUserRatingChanged();break;case c.tab:this._onUserRatingChanged(),f=!1;break;case c.escape:this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(n,null);break;case c.leftArrow:"rtl"===e?this._incrementRating():this._decrementRating();break;case c.upArrow:this._incrementRating();break;case c.rightArrow:"rtl"===e?this._decrementRating():this._incrementRating();break;case c.downArrow:this._decrementRating();break;default:var h=0;if(d>=c.num0&&d<=c.num9?h=c.num0:d>=c.numPad0&&d<=c.numPad9&&(h=c.numPad0),h>0){var i=!1,j=Math.min(d-h,this._maxRating);0!==j||this._enableClear||(j=1),j!==this._tentativeRating&&(this._closeTooltip(),i=!0),this._tentativeRating=j,this._showTentativeRating(i,"keyboard")}else f=!1}f&&(b.stopPropagation(),b.preventDefault())},_onPointerOut:function(a){this._captured||g.eventWithinElement(this._element,a)||(this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(n,null))},_onUserRatingChanged:function(){this._disabled||(this._closeTooltip(),this._userRating===this._tentativeRating||this._lastEventWasCancel||this._lastEventWasChange?this._updateControl():(this.userRating=this._tentativeRating,this._raiseEvent(o,this._userRating)))},_raiseEvent:function(b,c){if(!this._disabled&&(this._lastEventWasChange=b===o,this._lastEventWasCancel=b===n,a.document.createEvent)){var d=a.document.createEvent("CustomEvent");d.initCustomEvent(b,!1,!1,{tentativeRating:c}),this._element.dispatchEvent(d)}},_resetNextElement:function(b){if(null!==this._averageRatingElement.nextSibling){g._setFlexStyle(this._averageRatingElement.nextSibling,{grow:1,shrink:1});var c=this._averageRatingElement.nextSibling.style,d=a.getComputedStyle(this._element).direction;b&&(d="rtl"===d?"ltr":"rtl"),"rtl"===d?(c.paddingRight=this._elementPadding,c.borderRight=this._elementBorder,c.direction="rtl"):(c.paddingLeft=this._elementPadding,c.borderLeft=this._elementBorder,c.direction="ltr"),c.backgroundPosition="left",c.backgroundSize="100% 100%",c.width=this._resizeStringValue(this._elementWidth,1,c.width)}},_resetAverageStar:function(a){this._resetNextElement(a),this._hideAverageRating()},_resizeStringValue:function(a,b,c){var d=parseFloat(a);if(isNaN(d))return null!==c?c:a;var e=a.substring(d.toString(10).length);return d*=b,d+e},_setControlSize:function(a){var b=(Number(a)||l)>>0;this._maxRating=b>0?b:l},_updateTooltips:function(a){var b,c=0;if(null!==a)for(c=a.length<=this._maxRating+1?a.length:this._maxRating+1,b=0;c>b;b++)this._tooltipStrings[b]=a[b];else{for(b=0;b<this._maxRating;b++)this._tooltipStrings[b]=b+1;this._tooltipStrings[this._maxRating]=k.clearYourRating}},_updateTabIndex:function(){this._element.tabIndex=this._disabled?"-1":"0"},_setStarClasses:function(a,b,c){for(var d=0;d<this._maxRating;d++)b>d?this._elements[d].className=a:this._elements[d].className=c},_updateAverageStar:function(){var b=this._averageRatingElement.style,c=this._averageRatingElement.nextSibling.style;"rtl"===a.getComputedStyle(this._element).direction?(b.backgroundPosition="right",b.paddingRight=this._elementPadding,b.borderRight=this._elementBorder,c.paddingRight="0px",c.borderRight="0px",c.direction="ltr"):(b.backgroundPosition="left",c.backgroundPosition="right",b.paddingLeft=this._elementPadding,b.borderLeft=this._elementBorder,c.paddingLeft="0px",c.borderLeft="0px",c.direction="rtl"),g._setFlexStyle(this._averageRatingElement,{grow:this._floatingValue,shrink:this._floatingValue}),b.width=this._resizeStringValue(this._elementWidth,this._floatingValue,b.width),b.backgroundSize=100/this._floatingValue+"% 100%",b.display=a.getComputedStyle(this._averageRatingElement.nextSibling).display,this._averageRatingHidden=!1,g._setFlexStyle(this._averageRatingElement.nextSibling,{grow:1-this._floatingValue,shrink:1-this._floatingValue}),c.width=this._resizeStringValue(this._elementWidth,1-this._floatingValue,c.width),c.backgroundSize=100/(1-this._floatingValue)+"% 100%"},_showCurrentRating:function(){this._closeTooltip(),this._tentativeRating=-1,this._disabled||this._updateControl(),this._updateAccessibilityRestState()},_showTentativeRating:function(a,b){!this._disabled&&this._tentativeRating>=0&&(this._setStarClasses(C,this._tentativeRating,B),this._hideAverageStar()),this._updateAccessibilityHoverState(),a&&(this._openTooltip(b),this._raiseEvent(p,this._tentativeRating))},_openTooltip:function(b){if(!this.disabled)if(this._ensureTooltips(),this._tentativeRating>0)this._toolTips[this._tentativeRating-1].innerHTML=this._tooltipStrings[this._tentativeRating-1],this._toolTips[this._tentativeRating-1].open(b);else if(0===this._tentativeRating){this._clearElement=a.document.createElement("div");var c=this._elements[0].offsetWidth+parseInt(this._elementPadding,10);"ltr"===a.getComputedStyle(this._element).direction&&(c*=-1),this._clearElement.style.cssText="visiblity:hidden; position:absolute; width:0px; height:100%; left:"+c+"px; top:0px;",this._elements[0].appendChild(this._clearElement),this._toolTips[this._maxRating]=new j.Tooltip(this._clearElement),this._toolTips[this._maxRating].innerHTML=this._tooltipStrings[this._maxRating],this._toolTips[this._maxRating].open(b)}},_closeTooltip:function(){0!==this._toolTips.length&&(this._tentativeRating>0?this._toolTips[this._tentativeRating-1].close():0===this._tentativeRating&&null!==this._clearElement&&(this._toolTips[this._maxRating].close(),this._elements[0].removeChild(this._clearElement),this._clearElement=null))},_clearTooltips:function(){if(this._toolTips&&0!==this._toolTips.length)for(var a=0;a<this._maxRating;a++)this._toolTips[a].innerHTML=null},_appendClass:function(a){for(var b=0;b<=this._maxRating;b++)g.addClass(this._elements[b],a)},_setClasses:function(a,b,c){for(var d=0;d<this._maxRating;d++)b>d?this._elements[d].className=a:this._elements[d].className=c},_ensureAverageMSStarRating:function(){g.data(this._averageRatingElement).msStarRating=Math.ceil(this._averageRating)},_updateControl:function(){if(this._controlUpdateNeeded){if(0!==this._averageRating&&0===this._userRating&&this._averageRating>=1&&this._averageRating<=this._maxRating){this._setClasses(y,this._averageRating-1,x),this._averageRatingElement.className=y;for(var b=0;b<this._maxRating;b++)if(b<this._averageRating&&b+1>=this._averageRating){this._resetNextElement(!1),this._element.insertBefore(this._averageRatingElement,this._elements[b]),this._floatingValue=this._averageRating-b;var c=a.getComputedStyle(this._elements[b]);this._elementWidth=c.width,"rtl"===a.getComputedStyle(this._element).direction?(this._elementPadding=c.paddingRight,this._elementBorder=c.borderRight):(this._elementPadding=c.paddingLeft,this._elementBorder=c.borderLeft),this._updateAverageStar()}}0!==this._userRating&&this._userRating>=1&&this._userRating<=this._maxRating&&(this._setClasses(A,this._userRating,z),this._resetAverageStar(!1)),0===this._userRating&&0===this._averageRating&&(this._setClasses(w,this._maxRating),this._resetAverageStar(!1)),this.disabled&&this._appendClass(D),0!==this._averageRating&&0===this._userRating?this._appendClass(E):this._appendClass(F),this._updateAccessibilityRestState()}}})})})}),d("ui",["WinJS/Core/_WinJS","WinJS/Controls/Rating"],function(a){"use strict";return a}),c(["WinJS/Core/_WinJS","ui"],function(b){return a.WinJS=b,b})})}(this);
//# sourceMappingURL=ui.min.js.map